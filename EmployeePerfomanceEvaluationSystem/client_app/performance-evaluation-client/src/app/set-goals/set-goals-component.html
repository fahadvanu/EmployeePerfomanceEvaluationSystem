<div class="container_row">

    <!-- TITLE-->
    <div class="row">
        <div class="col-md-10 offset-xl-1 title_Col">

            <div class="title_set_goals">
                <h3> SET GOALS  </h3>
            </div>

        </div>
    </div>

    <div class="row">

        <div class="col-md-10 offset-xl-1">

            <form [formGroup]="setGoalFormGroup" novalidate>

                <!-- ITERATION DETAILS -->

                <div class="row" *ngIf="setGoalFormGroup.get('iteration').value != null">

                    <div class="col-md-12 iteration_details_div">

                        <div class="iteration_details_container">

                            <div class="row iteration_details_container_row">

                                <div class="col-sm-12">

                                    <label class="label_controls label_controls_bold col-form-label col-sm-6">Start Date</label>

                                    <label class="label_controls col-form-label col-sm-6">
                                        {{setGoalFormGroup.get('iteration').value.startDate}}
                                    </label>
                                </div>

                                <div class="col-sm-12">

                                    <label class="label_controls label_controls_bold col-form-label col-sm-6">End Date</label>

                                    <label class="label_controls col-form-label col-sm-6">
                                        {{setGoalFormGroup.get('iteration').value.endDate}}
                                    </label>
                                </div>


                            </div>

                            <div class="row iteration_details_container_row">

                                <div class="col-sm-12">

                                    <label class="label_controls label_controls_bold col-form-label col-sm-6">Activated Date</label>

                                    <label class="label_controls col-form-label col-sm-6">
                                        {{setGoalFormGroup.get('iteration').value.activatedDate}}
                                    </label>
                                </div>

                                <div class="col-sm-12">

                                    <label class="label_controls label_controls_bold col-form-label col-sm-6">Status</label>

                                    <label class="label_controls col-form-label col-sm-6">
                                        {{ getIterationStatus(setGoalFormGroup.get('iteration').value.status) }}
                                    </label>
                                </div>


                            </div>

                        </div>

                    </div>

                </div>

                <!-- USER DETAILS -->

                <div class="row" *ngIf="setGoalFormGroup.get('user').value != null">

                    <div class="col-md-12 user_details_div">

                        <div class="user_details_container">

                            <div class="row user_details_container_row">

                                <div class="col-sm-12">

                                    <label class="label_controls label_controls_bold col-form-label col-sm-6">First Name</label>

                                    <label class="label_controls col-form-label col-sm-6">
                                        {{setGoalFormGroup.get('user').value.firstName}}
                                    </label>
                                </div>

                                <div class="col-sm-12">

                                    <label class="label_controls label_controls_bold col-form-label col-sm-6">End Date</label>

                                    <label class="label_controls col-form-label col-sm-6">
                                        {{setGoalFormGroup.get('user').value.lastName}}
                                    </label>
                                </div>

                                <div class="col-sm-12">

                                    <label class="label_controls label_controls_bold col-form-label col-sm-6">Email</label>

                                    <label class="label_controls col-form-label col-sm-6">
                                        {{setGoalFormGroup.get('user').value.email}}
                                    </label>
                                </div>

                            </div>

                            <div class="row user_details_container_row">


                                <div class="col-sm-12">

                                    <label class="label_controls label_controls_bold col-form-label col-sm-6">Reporting Manager</label>

                                    <label class="label_controls col-form-label col-sm-6">
                                        {{ setGoalFormGroup.get('user').value.reportingManager }}
                                    </label>
                                </div>

                                <div class="col-sm-12">

                                    <label class="label_controls label_controls_bold col-form-label col-sm-6">Role</label>

                                    <label class="label_controls col-form-label col-sm-6">
                                        {{setGoalFormGroup.get('user').value.roleName}}
                                    </label>
                                </div>

                                <div class="col-sm-12">

                                    <label class="label_controls label_controls_bold col-form-label col-sm-6">Department</label>

                                    <label class="label_controls col-form-label col-sm-6">
                                        {{ setGoalFormGroup.get('user').value.departmentName }}
                                    </label>
                                </div>

                            </div>


                        </div>

                    </div>

                </div>

                <!-- GOALS -->

                <div class="row goals_table_container">

                    <div class="col-md-12 mt-4 goals_table_row">


                        <div class="row">
                            <div class="input-group col-md-4 offset-xl-8 goal_search_control">
                                <input class="form-control" placeholder="search"
                                       value="search" name="search-input"
                                       formControlName="searchTerm">
                                <span class="input-group-append">
                                    <button class="btn btn-outline-secondary" type="button" (click)="searchGoals()">
                                        <i class="fa fa-search"></i>
                                    </button>
                                </span>
                            </div>
                        </div>

                        <div class="row table_container_row">
                            <div class="col-md-12 table_container_column">

                                <table name="goalTable" class="table table-bordered table-hover goal_table"
                                       *ngIf="setGoalFormGroup.get('goalsToDisplay').value.length > 0">
                                    <thead class="thead-dark">
                                        <tr>
                                            <th scope="col" class="goal_name_th">Goal</th>
                                            <th scope="col" class="add_control_th"></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let goal of (setGoalFormGroup.get('goalsToDisplay').value
                                                                        | paginationPipe:
                                                                          setGoalFormGroup.get('currentPage').value:
                                                                          itemsPerPage)" class="table-style">
                                            <th scope="row"> {{ goal.goalName }}</th>


                                            <td class="goal_table_controls">
                                                <button type="button" class="btn btn-default"
                                                        (click)="addGoal(goal)">
                                                    <span class="fa fa-plus-square-o fa-lg" title="Add Goal"></span>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>

                                <table name="nogoalsTable" class="table table-bordered table-hover mt-5 goal_table"
                                       *ngIf="setGoalFormGroup.get('goalsToDisplay').value.length == 0">
                                    <thead class="thead-dark">
                                        <tr>
                                            <th scope="col">Goal</th>
                                            <th scope="col"></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="table-style">

                                            <td class="goal_table_controls" colspan="2">
                                                No Goals to display
                                            </td>

                                        </tr>
                                    </tbody>
                                </table>

                            </div>

                        </div>

                        <div class="row mt-2" *ngIf="setGoalFormGroup.get('goalsToDisplay').value.length > 0">
                            <div class="col-xs-12 col-12 pager-div">
                                <pagination name="paginationControl" (pageChanged)="pageChanged($event)"
                                            [totalItems]="setGoalFormGroup.get('goalsToDisplay').value.length"
                                            [itemsPerPage]="itemsPerPage"
                                            [maxSize]="itemsPerPage"
                                            formControlName="currentPage">

                                </pagination>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- GOALS ADD/UPDATE -->

                <div class="row goals_add_update_container" formGroupName="goalFormGroup">

                    <div class="col-md-12 goals_add_update_container_row">

                       
                                <div class="col-sm-8">

                                    <div class="form-group">
                                        <label for="goalName">Goal</label>
                                        <textarea class="form-control"
                                                  name="goalName" placeholder="Choose Goal..."
                                                  formControlName="goalTitle"
                                                  rows="3"
                                                  readonly
                                                  spellcheck="false"></textarea>

                                    
                                    </div>

                                </div>

                                <div class="col-sm-8">

                                    <div class="form-group">
                                        <label for="goalDescription">Description</label>
                                        <textarea class="form-control"
                                                  name="goalDescription" placeholder="Enter Description(Max 300 characters)"
                                                  formControlName="goalDescription"
                                                  required
                                                  maxlength="300"
                                                  rows="3"
                                                  spellcheck="false"></textarea>

                                        <p class="help-block" *ngIf="setGoalFormGroup.get('goalFormGroup').get('goalDescription').hasError('required')
                                                                   && setGoalFormGroup.get('goalFormGroup').get('goalDescription').touched">* Description is required</p>

                                    </div>

                                </div>

                                <div class="col-sm-4">

                                    <div class="form-group">
                                        <label for="goalWeightage">Goal Weightage</label>
                                        <input type="number" class="form-control"
                                               name="goalWeightage" placeholder="Enter Weightage"
                                               formControlName="weightage"
                                               required />

                                        <p class="help-block" *ngIf="setGoalFormGroup.get('goalFormGroup').get('weightage').hasError('required')
                                                                   && setGoalFormGroup.get('goalFormGroup').get('weightage').touched">* Weightage is required</p>

                                    </div>

                                </div>


                                <button type="submit" class="btn btn-primary goal_submit_button"
                                        [disabled]="!setGoalFormGroup.get('goalFormGroup').valid"
                                        (click)="addUpdateIterationGoal()">
                                    Submit
                                </button>

                                <button type="button" class="btn btn-warning ml-3"
                                        (click)="resetAddUpdateFormGroup()">
                                    Reset
                                </button>

                            </div>

                     

                </div>

                <!--GOALs CHOSEN-->

            </form>

        </div>
    </div>

</div>