(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{A30K:function(t,e,i){"use strict";i.r(e),i.d(e,"IterationModule",(function(){return R}));var n=i("+fd8"),a=i("tyNb"),o=i("WDFA");class r{}class s{}class c{}var b=i("Gs7e"),l=i("X5XA"),d=i("fXoL"),g=i("OqMo"),h=i("3PAx"),u=i("jonD"),f=i("K3ix"),p=i("ofXK"),m=i("3Pt+"),P=i("hzby"),O=i("Lm2G"),v=i("SrT9");function I(t,e){1&t&&(d.Pb(0,"div"),d.zc(1," Title is required. "),d.Ob())}function x(t,e){1&t&&(d.Pb(0,"div"),d.zc(1," Title cannot exceeds 200 characters. "),d.Ob())}function D(t,e){if(1&t&&(d.Pb(0,"div",30),d.xc(1,I,2,0,"div",3),d.xc(2,x,2,0,"div",3),d.Ob()),2&t){d.Yb();const t=d.oc(9);d.xb(1),d.fc("ngIf",t.errors.required),d.xb(1),d.fc("ngIf",t.errors.maxlength)}}function _(t,e){1&t&&(d.Pb(0,"div"),d.zc(1," Startdate is required. "),d.Ob())}function y(t,e){if(1&t&&(d.Pb(0,"div",30),d.xc(1,_,2,0,"div",3),d.Ob()),2&t){d.Yb();const t=d.oc(14);d.xb(1),d.fc("ngIf",t.errors.required)}}function C(t,e){1&t&&(d.Pb(0,"div"),d.zc(1," Title is required. "),d.Ob())}function S(t,e){if(1&t&&(d.Pb(0,"div",30),d.xc(1,C,2,0,"div",3),d.Ob()),2&t){d.Yb();const t=d.oc(19);d.xb(1),d.fc("ngIf",t.errors.required)}}function M(t,e){1&t&&d.Kb(0,"span",43)}function T(t,e){1&t&&d.Kb(0,"span",44)}function w(t,e){if(1&t){const t=d.Qb();d.Pb(0,"td",38),d.Pb(1,"button",39),d.Wb("click",(function(){d.qc(t);const e=d.Yb().$implicit;return d.Yb(3).updateIteration(e)})),d.xc(2,M,1,0,"span",41),d.xc(3,T,1,0,"span",42),d.Ob(),d.Ob()}if(2&t){const t=d.Yb().$implicit;d.xb(2),d.fc("ngIf",1==t.status),d.xb(1),d.fc("ngIf",2==t.status)}}function A(t,e){1&t&&(d.Pb(0,"td",38),d.Kb(1,"span",45),d.Ob())}function z(t,e){if(1&t){const t=d.Qb();d.Pb(0,"tr",35),d.Pb(1,"th",36),d.zc(2),d.Ob(),d.Pb(3,"th",36),d.zc(4),d.Ob(),d.Pb(5,"th",36),d.zc(6),d.Ob(),d.Pb(7,"th",36),d.zc(8),d.Ob(),d.Pb(9,"th",36),d.zc(10),d.Ob(),d.Pb(11,"th",36),d.zc(12),d.Ob(),d.xc(13,w,4,2,"td",37),d.xc(14,A,2,0,"td",37),d.Pb(15,"td",38),d.Pb(16,"button",39),d.Wb("click",(function(){d.qc(t);const i=e.$implicit;return d.Yb(3).deleteIteration(i)})),d.Kb(17,"span",40),d.Ob(),d.Ob(),d.Ob()}if(2&t){const t=e.$implicit,i=d.Yb(3);d.xb(2),d.Bc(" ",t.title,""),d.xb(2),d.Cc(" ",t.startDate," / ",t.endDate,""),d.xb(2),d.Bc(" ",t.createdDate,""),d.xb(2),d.Bc(" ",t.activatedDate,""),d.xb(2),d.Bc(" ",t.lockedDate,""),d.xb(2),d.Bc(" ",i.getIterationStatus(t.status),""),d.xb(1),d.fc("ngIf",1==t.status||2==t.status),d.xb(1),d.fc("ngIf",3==t.status)}}function E(t,e){if(1&t&&(d.Pb(0,"table",31),d.Pb(1,"thead",32),d.Pb(2,"tr"),d.Pb(3,"th",33),d.zc(4,"Title"),d.Ob(),d.Pb(5,"th",33),d.zc(6,"Duration"),d.Ob(),d.Pb(7,"th",33),d.zc(8,"Created On"),d.Ob(),d.Pb(9,"th",33),d.zc(10,"Activated On"),d.Ob(),d.Pb(11,"th",33),d.zc(12,"Locked On"),d.Ob(),d.Pb(13,"th",33),d.zc(14,"Status"),d.Ob(),d.Kb(15,"th",33),d.Kb(16,"th",33),d.Ob(),d.Ob(),d.Pb(17,"tbody"),d.xc(18,z,18,9,"tr",34),d.Zb(19,"paginationPipe"),d.Ob(),d.Ob()),2&t){const t=d.Yb(2);d.xb(18),d.fc("ngForOf",d.cc(19,1,t.iterationsToDisplay,t.currentPage,t.itemsPerPage))}}function k(t,e){1&t&&(d.Pb(0,"table",46),d.Pb(1,"thead",32),d.Pb(2,"tr"),d.Pb(3,"th",33),d.zc(4,"Title"),d.Ob(),d.Pb(5,"th",33),d.zc(6,"Duration"),d.Ob(),d.Pb(7,"th",33),d.zc(8,"Created On"),d.Ob(),d.Pb(9,"th",33),d.zc(10,"Activated On"),d.Ob(),d.Pb(11,"th",33),d.zc(12,"Locked On"),d.Ob(),d.Pb(13,"th",33),d.zc(14,"Status"),d.Ob(),d.Kb(15,"th",33),d.Kb(16,"th",33),d.Ob(),d.Ob(),d.Pb(17,"tbody"),d.Pb(18,"tr",35),d.Pb(19,"td",47),d.zc(20," No Records Found "),d.Ob(),d.Ob(),d.Ob(),d.Ob())}function Y(t,e){if(1&t){const t=d.Qb();d.Pb(0,"div",48),d.Pb(1,"div",49),d.Pb(2,"pagination",50),d.Wb("pageChanged",(function(e){return d.qc(t),d.Yb(2).pageChanged(e)}))("ngModelChange",(function(e){return d.qc(t),d.Yb(2).currentPage=e})),d.Ob(),d.Ob(),d.Ob()}if(2&t){const t=d.Yb(2);d.xb(2),d.fc("totalItems",t.iterationsToDisplay.length)("itemsPerPage",t.itemsPerPage)("maxSize",t.itemsPerPage)("ngModel",t.currentPage)}}const q=function(){return{isAnimated:!0,containerClass:"theme-orange",showClearButton:!0,clearPosition:"right",dateInputFormat:"DD/MM/YYYY"}};function L(t,e){if(1&t){const t=d.Qb();d.Pb(0,"div"),d.Pb(1,"form",4,5),d.Pb(3,"div",0),d.Pb(4,"div",6),d.Pb(5,"div",7),d.Pb(6,"label",8),d.zc(7,"Title"),d.Ob(),d.Pb(8,"textarea",9,10),d.Wb("ngModelChange",(function(e){return d.qc(t),d.Yb().iteration_model.title=e})),d.Ob(),d.Ob(),d.Pb(10,"div",7),d.Pb(11,"label",11),d.zc(12,"Iteration Start Date"),d.Ob(),d.Pb(13,"input",12,13),d.Wb("ngModelChange",(function(e){return d.qc(t),d.Yb().iteration_model.startDate=e})),d.Ob(),d.Ob(),d.Pb(15,"div",7),d.Pb(16,"label",14),d.zc(17,"Iteration Start Date"),d.Ob(),d.Pb(18,"input",15,16),d.Wb("ngModelChange",(function(e){return d.qc(t),d.Yb().iteration_model.endDate=e})),d.Ob(),d.Ob(),d.Pb(20,"div",17),d.Pb(21,"button",18),d.Wb("click",(function(){d.qc(t);const e=d.oc(2);return d.Yb().createIteration(e)})),d.zc(22," Submit "),d.Ob(),d.Ob(),d.xc(23,D,3,2,"div",19),d.xc(24,y,2,1,"div",19),d.xc(25,S,2,1,"div",19),d.Ob(),d.Ob(),d.Pb(26,"div",20),d.Pb(27,"input",21),d.Wb("ngModelChange",(function(e){return d.qc(t),d.Yb().searchTerm=e})),d.Ob(),d.Pb(28,"span",22),d.Pb(29,"button",23),d.Wb("click",(function(){return d.qc(t),d.Yb().searchIterations()})),d.Kb(30,"i",24),d.Ob(),d.Ob(),d.Ob(),d.Pb(31,"div",25),d.Pb(32,"div",26),d.xc(33,E,20,5,"table",27),d.xc(34,k,21,0,"table",28),d.Ob(),d.Ob(),d.xc(35,Y,3,4,"div",29),d.Ob(),d.Ob()}if(2&t){const t=d.oc(2),e=d.oc(9),i=d.oc(14),n=d.oc(19),a=d.Yb();d.xb(8),d.fc("ngModel",a.iteration_model.title),d.xb(5),d.fc("ngModel",a.iteration_model.startDate)("bsConfig",d.hc(13,q)),d.xb(5),d.fc("ngModel",a.iteration_model.endDate)("bsConfig",d.hc(14,q)),d.xb(3),d.fc("disabled",t.invalid),d.xb(2),d.fc("ngIf",e.invalid&&(e.dirty||e.touched)),d.xb(1),d.fc("ngIf",i.invalid&&(i.dirty||i.touched)),d.xb(1),d.fc("ngIf",n.invalid&&(n.dirty||n.touched)),d.xb(2),d.fc("ngModel",a.searchTerm),d.xb(6),d.fc("ngIf",a.iterationsToDisplay.length>0),d.xb(1),d.fc("ngIf",0==a.iterationsToDisplay.length),d.xb(1),d.fc("ngIf",a.iterationsToDisplay.length>0)}}const K=[{path:"",component:(()=>{class t{constructor(t,e,i,n,a){this.iterationService=t,this.spinnerService=e,this.toastrNotificationService=i,this.cdRef=n,this.modalService=a,this.iterations=new Array,this.iterationsToDisplay=new Array,this.currentPage=1,this.itemsPerPage=5,this.loading=!1,this.iteration_model=new r}ngOnInit(){this.resetVariables(),this.getIterationsFromDatabase()}resetVariables(){this.searchTerm=""}getIterationsFromDatabase(){this.loading=!0,this.spinnerService.updateMessage("Loading iterations....."),this.spinnerService.busy(),this.iterationService.getIterations().subscribe(t=>{null!=t.data&&(this.iterations=o.a.FormIterationModelArray(t),this.iterationsToDisplay=this.iterations.slice()),this.loading=!1,this.spinnerService.idle()},t=>{this.loading=!1,this.spinnerService.idle(),console.log("Exception occured while fetching iterations from Database")})}createIteration(t){t.valid&&this.validStartAndEndDate()&&(this.modalRef=this.modalService.show(b.a,{initialState:{promptMessage:"Are you sure you want to create new iteration?",callback:e=>{if(e){this.spinnerService.updateMessage("Creating new iteration....."),this.spinnerService.busy();let e=this.mapCreateIterationRequest();this.iterationService.addNewIteration(e).subscribe(e=>{this.getIterationsAfterUpdate("New iteration created successfully"),t.reset()},t=>{this.spinnerService.idle(),console.log("Exception occured while creating new iteration")})}}}}))}getIterationsAfterUpdate(t){this.iterationService.getIterations().subscribe(e=>{null!=e.data&&(this.iterations=o.a.FormIterationModelArray(e),this.iterationsToDisplay=this.iterations.slice()),this.resetAfterDbOperation(),this.spinnerService.idle(),this.toastrNotificationService.success(t)},t=>{this.spinnerService.idle(),console.log("Exception occured getIterationsAfterUpdate()")})}mapCreateIterationRequest(){let t=new s;return t.title=this.iteration_model.title,t.startDate=new Date(this.iteration_model.startDate.getTime()-6e4*this.iteration_model.startDate.getTimezoneOffset()).toJSON(),t.endDate=new Date(this.iteration_model.endDate.getTime()-6e4*this.iteration_model.endDate.getTimezoneOffset()).toJSON(),t}validStartAndEndDate(){return this.iteration_model.startDate>this.iteration_model.endDate?(this.toastrNotificationService.warning("Start date cannot be greater than end date"),!1):6==this.monthDiff(this.iteration_model.startDate,this.iteration_model.endDate)||(this.toastrNotificationService.warning("Start date and end date should have difference of 6 months"),!1)}monthDiff(t,e){let i;return i=12*(e.getFullYear()-t.getFullYear()),i-=t.getMonth(),i+=e.getMonth(),i<=0?0:i+1}pageChanged(t){this.currentPage=t.page}searchIterations(){""!=this.searchTerm&&null!=this.searchTerm&&null!=this.searchTerm?(this.iterationsToDisplay=this.iterations.filter(t=>-1!=t.title.toLocaleLowerCase().indexOf(this.searchTerm.toLocaleLowerCase())),setTimeout(()=>{this.currentPage=1}),this.cdRef.detectChanges()):(this.iterationsToDisplay=this.iterations.slice(),setTimeout(()=>{this.currentPage=1}),this.cdRef.detectChanges())}resetAfterDbOperation(){this.resetVariables(),setTimeout(()=>{this.currentPage=1}),this.cdRef.detectChanges(),this.iteration_model=new r}getIterationStatus(t){return t==o.b.NOTACTIVE?l.a.NOTACTIVE:t==o.b.ACTIVE?l.a.ACTIVE_ITERATION:t==o.b.DELETED?l.a.DELETED:t==o.b.LOCKED?l.a.LOCKED:void 0}deleteIteration(t){this.modalRef=this.modalService.show(b.a,{initialState:{promptMessage:"Are you sure you want to delete iteration?",callback:e=>{e&&(this.spinnerService.updateMessage("Deleting iteration....."),this.spinnerService.busy(),this.iterationService.deleteIteration(t.iterationId).subscribe(t=>{this.getIterationsAfterUpdate("Iteration deleted successfully")},t=>{this.spinnerService.idle(),console.log("Exception occured while deleting iteration")}))}}})}updateIteration(t){this.modalRef=this.modalService.show(b.a,{initialState:{promptMessage:this.getUpdateIterationPromptMessage(t),callback:e=>{if(e){this.spinnerService.updateMessage("Updating iteration....."),this.spinnerService.busy();let e=this.getUpdateIterationRequestModel(t);this.iterationService.updateIteration(t.iterationId,e).subscribe(t=>{this.getIterationsAfterUpdate("Iteration updated successfully")},t=>{this.spinnerService.idle(),console.log("Exception occured while updating iteration")})}}}})}getUpdateIterationPromptMessage(t){let e="";return t.status==o.b.NOTACTIVE&&(e="Are you sure you want to Activate iteration?"),t.status==o.b.ACTIVE&&(e="Are you sure you want to Locked iteration?"),e}getUpdateIterationRequestModel(t){let e=new c;return t.status==o.b.NOTACTIVE&&(e.newStatus=o.b.ACTIVE),t.status==o.b.ACTIVE&&(e.newStatus=o.b.LOCKED),e}}return t.\u0275fac=function(e){return new(e||t)(d.Jb(g.a),d.Jb(h.a),d.Jb(u.a),d.Jb(d.h),d.Jb(f.b))},t.\u0275cmp=d.Db({type:t,selectors:[["ng-component"]],decls:6,vars:1,consts:[[1,"row","mt-3"],[1,"col-md-9","offset-2"],[1,"title_iteration_management"],[4,"ngIf"],["novalidate",""],["iterationForm","ngForm"],[1,"col-xs-9","col-9","add_controls"],[1,"form-group"],["for","title"],["name","title","placeholder","Enter Title(max number of characters accepted are 200)","required","","maxlength","200","rows","3",1,"form-control",3,"ngModel","ngModelChange"],["title","ngModel"],["for","startDate"],["readonly","","name","startDate","placeholder","Select start date","required","","autocomplete","off","bsDatepicker","",1,"form-control","date_controls",3,"ngModel","bsConfig","ngModelChange"],["startDate","ngModel"],["for","endDate"],["name","endDate","placeholder","Select end date","required","","autocomplete","off","bsDatepicker","",1,"form-control","date_controls",3,"ngModel","bsConfig","ngModelChange"],["endDate","ngModel"],[1,"form-group","button_controls"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["class","alert alert-danger",4,"ngIf"],[1,"input-group","col-md-4","iteration_search_control"],["placeholder","search by title","value","search","name","search-input",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-search"],[1,"row","table_container_row"],[1,"col-md-12","table_container_column"],["name","iterationTable","class","table table-bordered table-hover iteration_table",4,"ngIf"],["name","noiterationsTable","class","table table-bordered table-hover mt-5 iteration_table",4,"ngIf"],["class","row",4,"ngIf"],[1,"alert","alert-danger"],["name","iterationTable",1,"table","table-bordered","table-hover","iteration_table"],[1,"thead-dark"],["scope","col"],["class","table-style",4,"ngFor","ngForOf"],[1,"table-style"],["scope","row"],["class","iteration_table_controls",4,"ngIf"],[1,"iteration_table_controls"],["type","button",1,"btn","btn-default",3,"click"],[1,"fa","fa-trash-o","fa-lg"],["class","fa fa-toggle-on fa-lg","title","Activate Iteration",4,"ngIf"],["class","fa fa-lock fa-lg","title","Locked Iteration",4,"ngIf"],["title","Activate Iteration",1,"fa","fa-toggle-on","fa-lg"],["title","Locked Iteration",1,"fa","fa-lock","fa-lg"],["title","Iteration is Locked",1,"fa","fa-ban","fa-lg"],["name","noiterationsTable",1,"table","table-bordered","table-hover","mt-5","iteration_table"],["colspan","8",1,"iteration_table_controls"],[1,"row"],[1,"col-xs-12","col-12","pager-div"],["name","paginationControl",3,"totalItems","itemsPerPage","maxSize","ngModel","pageChanged","ngModelChange"]],template:function(t,e){1&t&&(d.Pb(0,"div",0),d.Pb(1,"div",1),d.Pb(2,"div",2),d.Pb(3,"h3"),d.zc(4," Iterations Management "),d.Ob(),d.Ob(),d.xc(5,L,36,15,"div",3),d.Ob(),d.Ob()),2&t&&(d.xb(5),d.fc("ngIf",!e.loading))},directives:[p.l,m.y,m.m,m.n,m.a,m.u,m.i,m.l,m.o,P.b,P.a,p.k,O.a],pipes:[v.a],styles:[".title_iteration_management[_ngcontent-%COMP%]{text-align:center}.pager-div[_ngcontent-%COMP%]{display:flex;justify-content:center}.iteration_table_controls[_ngcontent-%COMP%]{text-align:center}.iteration_search_control[_ngcontent-%COMP%]{float:right;padding:0;margin-top:20px}.table_container_row[_ngcontent-%COMP%]{clear:both}.table_container_column[_ngcontent-%COMP%]{min-height:400px;max-height:400px;padding-left:0;padding-right:0}.iteration_table[_ngcontent-%COMP%]{margin-top:20px!important}.add_controls[_ngcontent-%COMP%]{margin:0 auto}.date_controls[_ngcontent-%COMP%]{width:300px;background-color:#fff}.button_controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}"]}),t})(),canActivate:[i("Dste").a]}];let N=(()=>{class t{}return t.\u0275mod=d.Hb({type:t}),t.\u0275inj=d.Gb({factory:function(e){return new(e||t)},imports:[[a.e.forChild(K)],a.e]}),t})();var F=i("rEVn");let R=(()=>{class t{}return t.\u0275mod=d.Hb({type:t}),t.\u0275inj=d.Gb({factory:function(e){return new(e||t)},imports:[[n.a,F.a,N]]}),t})()}}]);